C51 COMPILER V9.00   I2C                                                                   01/20/2014 14:45:32 PAGE 1   


C51 COMPILER V9.00, COMPILATION OF MODULE I2C
OBJECT MODULE PLACED IN .\bin\I2C.obj
COMPILER INVOKED BY: C:\Keil\C51\BIN\C51.EXE src\I2C.c BROWSE DEBUG OBJECTEXTEND PRINT(.\lst\I2C.lst) TABS(2) OBJECT(.\b
                    -in\I2C.obj)

line level    source

   1          #include "platform.h"
   2          
   3          void I2C_Write_Data(unsigned char dev_addr, unsigned char sccb_addr, unsigned char sccb_data)
   4          {
   5   1        XBYTE[Peripheral_1_CLK_CTRL] = 0x20;  // I2C_1 Clock 30MHz
   6   1        
   7   1        XBYTE[CIS_CTRL]       = 0x40;
   8   1        XBYTE[I2C1_FIFO_CTRL] = 0x00;
   9   1        XBYTE[I2C1_SCL]       = 0xAA;
  10   1      
  11   1        XBYTE[I2C1_CTRL_2551B]=0xE0;
  12   1        while(!(XBYTE[I2C1_CTRL_2551B]&0x08));
  13   1        XBYTE[I2C1_CTRL_2551B]=0xC8;
  14   1      
  15   1        XBYTE[I2C1_DATA_REG_2551B]=dev_addr;
  16   1        
  17   1        while(!(XBYTE[I2C1_CTRL_2551B]&0x08));
  18   1        XBYTE[I2C1_CTRL_2551B]=0xC8;
  19   1      
  20   1        XBYTE[I2C1_DATA_REG_2551B]=sccb_addr;
  21   1        while(!(XBYTE[I2C1_CTRL_2551B]&0x08));
  22   1        XBYTE[I2C1_CTRL_2551B]=0xC8;
  23   1        
  24   1        XBYTE[I2C1_DATA_REG_2551B]=sccb_data;
  25   1        while(!(XBYTE[I2C1_CTRL_2551B]&0x08));
  26   1        XBYTE[I2C1_CTRL_2551B]  =0xC8;
  27   1      
  28   1        XBYTE[I2C1_CTRL_2551B]  = 0xD8;
  29   1      
  30   1        while(!(XBYTE[I2C1_CTRL_2551B]&0x08));
  31   1        XBYTE[I2C1_CTRL_2551B]  = 0xC8;
  32   1      }
  33          /*
  34          void I2C_Read_Data(word8 dev_addr, word8 sccb_addr1, word8 sccb_addr0)
  35          {
  36            XBYTE[CIS_CTRL]        = 0x40;
  37            XBYTE[I2C1_FIFO_CTRL]  = 0x00;
  38            XBYTE[I2C1_SCL]        = 0x00;
  39          
  40            XBYTE[I2C1_CTRL_2551B]=0xE0;
  41            XBYTE[I2C1_DATA_REG_2551B]=dev_addr;
  42          
  43            while(!(XBYTE[I2C1_CTRL_2551B]&0x08));
  44            XBYTE[I2C1_CTRL_2551B]=0xC8;
  45            P1_0 = 0;
  46            XBYTE[I2C1_DATA_REG_2551B]=sccb_addr1;
  47            while(!(XBYTE[I2C1_CTRL_2551B]&0x08));
  48            XBYTE[I2C1_CTRL_2551B]=0xC8;
  49          
  50            XBYTE[I2C1_DATA_REG_2551B]=sccb_addr0;
  51            while(!(XBYTE[I2C1_CTRL_2551B]&0x08));
  52            XBYTE[I2C1_CTRL_2551B]=0xC8;
  53            P1_1 = 0;
  54          
C51 COMPILER V9.00   I2C                                                                   01/20/2014 14:45:32 PAGE 2   

  55            XBYTE[I2C1_CTRL_2551B]=0xE0;
  56            XBYTE[I2C1_DATA_REG_2551B]=0x21;
  57            while(!(XBYTE[I2C1_CTRL_2551B]&0x08));  
  58            
  59            XBYTE[I2C1_CTRL_2551B]=0xC8;
  60            P1_2 = 0;
  61          
  62            P2 =  XBYTE[I2C1_DATA_REG_2551B];
  63          
  64            XBYTE[I2C1_CTRL_2551B]=0xD8;
  65          
  66            while(!(XBYTE[I2C1_CTRL_2551B]&0x08));
  67            XBYTE[I2C1_CTRL_2551B]=0xC8;
  68            P1_3 = 0;
  69            XBYTE[I2C1_CTRL_2551B]=0x08;
  70          }
  71          */
  72          


MODULE INFORMATION:   STATIC OVERLAYABLE
   CODE SIZE        =    113    ----
   CONSTANT SIZE    =   ----    ----
   XDATA SIZE       =   ----    ----
   PDATA SIZE       =   ----    ----
   DATA SIZE        =   ----    ----
   IDATA SIZE       =   ----    ----
   BIT SIZE         =   ----    ----
END OF MODULE INFORMATION.


C51 COMPILATION COMPLETE.  0 WARNING(S),  0 ERROR(S)
